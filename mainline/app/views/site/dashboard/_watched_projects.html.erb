<%
#--
#   Copyright (C) 2012-2013 Gitorious AS
#
#   This program is free software: you can redistribute it and/or modify
#   it under the terms of the GNU Affero General Public License as published by
#   the Free Software Foundation, either version 3 of the License, or
#   (at your option) any later version.
#
#   This program is distributed in the hope that it will be useful,
#   but WITHOUT ANY WARRANTY; without even the implied warranty of
#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#   GNU Affero General Public License for more details.
#
#   You should have received a copy of the GNU Affero General Public License
#   along with this program.  If not, see <http://www.gnu.org/licenses/>.
#++
%>
<%= pull_box('Watched', :class => 'watched') do %>
  <% if favorites.blank? %>
    <p class="hint muted">
      <%= no_watchings_notice_for(user) %>
    </p>
  <% else %>
    <div class="filters clearfix">
      <ul class="unstyled">
        <li>
          <strong>Filter by</strong>
        </li>
        <% if is_current_user?(user) %>
          <li>
            <a class="foreign" href="#not-mine">Not yours</a>
          </li>
          <li>
            <a class="mine" href="#mine">Yours</a>
          </li>
        <% end %>
        <li>
          <a href="#merge-requests" class="merge-requests">Merge requests</a>
        </li>
        <li>
          <a href="#repos" class="repositories">Repositories</a>
        </li>
        <li>
          <a href="#all" class="all">All</a>
        </li>
      </ul>
    </div>
    <table class="table">
      <% favorites.each do |favorite| %>
        <tr>
          <td class="<%= css_classes_for(favorite.watchable) %>">
            <%= link_to_watchable(favorite.watchable) %>
          </td>
        </tr>
      <% end %>
    </table>
  <% end %>
<% end %>
