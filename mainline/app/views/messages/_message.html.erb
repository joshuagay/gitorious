<%
  #--
  #   Copyright (C) 2012 Gitorious AS
  #   Copyright (C) 2009 Nokia Corporation and/or its subsidiary(-ies)
  #
  #   This program is free software: you can redistribute it and/or modify
  #   it under the terms of the GNU Affero General Public License as published by
  #   the Free Software Foundation, either version 3 of the License, or
  #   (at your option) any later version.
  #
  #   This program is distributed in the hope that it will be useful,
  #   but WITHOUT ANY WARRANTY; without even the implied warranty of
  #   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  #   GNU Affero General Public License for more details.
  #
  #   You should have received a copy of the GNU Affero General Public License
  #   along with this program.  If not, see <http://www.gnu.org/licenses/>.
  #++
  %>
<% message = MessagePresenter.new(message, current_user, self) %>
<tr class="<%= message.thread_class %>" id="<%= dom_id(message) -%>">
  <td>
    <input type="checkbox" name="message_ids[]" value="<%= message.id -%>" class="select_msg" />
  </td>
  <td class="who">
    <%= message.sender_and_recipients %> (<%= message.number_of_messages_in_thread %>)
  </td>
  <td>
    <%= link_to(h(message.thread_title), message) %> -
    <span class="preview">
      <%= truncate(h(message.body), :length => 50) %>
    </span>
  </td>
  <td class="timestamp">
    <%= distance_of_time_in_words_to_now(message.created_at) %> ago
  </td>
</tr>
